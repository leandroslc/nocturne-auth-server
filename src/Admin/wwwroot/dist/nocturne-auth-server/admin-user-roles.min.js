!function(){"use strict";window.searchUserRoles=function(e){var t=e.searchForm,n=e.searchUrl,a=e.results,r=window.Loading.create(t),i=function(){r.start();var e=$(t).serialize();$.get(n,e,(function(e){a.innerHTML=e,r.stop()}))};return t.addEventListener("submit",(function(e){e.preventDefault(),i()})),{search:i}},window.manageUserRoles=function(e){var t="data-role-action",n="data-application-change",a=window.searchUserRoles(e),r=e.addRolesButton,i=e.modalId,o=e.results,s=new window.Modal(i);var c=function(e){var t=s.querySelector("form");if(t){window.Validator.attach(t),t.addEventListener("submit",function(e,t){var n=window.Loading.create(e);return function(r){if(r.preventDefault(),window.Validator.isValid(e)){n.start();var i=$(e).serialize();$.post(t,i,(function(){a.search(),s.close()})).fail((function(e){window.ResponseHelper.isBadRequest(e)&&window.ResponseHelper.isHtml(e)&&u(e.responseText,t),s.close()}))}}}(t,e));var r=t.querySelector("["+n+"]");if(r){var i=r.getAttribute(n);r.addEventListener("change",function(e,t){var n=window.Loading.create(e);return function(e){e.preventDefault();var a=e.target.value,r=t+"?applicationId="+a;n.start(),$.get(r,(function(e){u(e,r)}))}}(t,i))}}},u=function(e,t){s.setContent(e),c(t)},d=function(e){var n=e.getAttribute(t);$.get(n,(function(e){u(e,n),s.show()}))};r.addEventListener("click",(function(){d(r)})),o.addEventListener("click",(function(e){var n=e.target.closest("["+t+"]");n&&d(n)})),a.search()}}();
